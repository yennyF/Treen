<!DOCTYPE html>
<html>
	<head>
		<%= favicon_link_tag 'layers2.ico' %>
		<title>TreeGraph : : Doc</title>

		<meta charset="utf-8">
		<meta http-equiv="Content-Language" content="es">
		<meta name="description" content="Aplicación para el dibujado de árboles">
		<meta name="keywords" content="HTML5 dibujar grafo árboles">
		<%= csrf_meta_tags %>
		
		<%= stylesheet_link_tag 'application', media: 'all'%>
		<%= javascript_include_tag 'application' %>

		<%= stylesheet_link_tag 'table' %>
		<%= javascript_include_tag 'table'%>
		<%= stylesheet_link_tag 'tab' %>
		<%= javascript_include_tag 'tab'%>
		<%= stylesheet_link_tag 'documents' %>
	</head>
	
	<body id="document-show">
		<header id="bar-title">
			<div class="section-title progress">
				<span class="content title" data-success="Guardado" data-error="Error" class="title"></span>
			</div>

			<div class="section-bar">
				<button type="button" id="back" class="btn-icon middle-parent"
					<% if !current_user %>
					onclick="location.href = '../'"
					<% end %>	>
					<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 33.718 33.718" xml:space="preserve">
						<g>
							<path d="M4.628,27.086c0,0-0.275,0.006-0.273-0.346c0-0.353,0.002-3.187,0-3.687c0.002-0.492,0.326-0.404,0.326-0.404h20.16
							c2.445,0,4.433-1.992,4.433-4.435c0-0.072,0.002-0.222,0.002-0.222s-0.002-0.067-0.002-0.105c0-2.448-1.988-4.437-4.433-4.437H8.59
							v0.002c-0.568,0-0.801,0-0.801,0s-0.003,1.52,0,2.148c0,0.631-0.678,0.032-0.678,0.032l-6.935-4.004c0,0-0.369-0.308-0.039-0.636
							c0.451-0.452,7.077-4.149,7.077-4.149s0.578-0.58,0.575,0.182c0,0.771,0,1.989,0,1.989s0.329-0.002,0.839,0l0,0H24.84
							c4.903,0,8.877,3.972,8.877,8.874c0,0.059,0.001,0.104,0,0.162c0.001,0.05-0.003,0.112-0.003,0.165
							c0,4.896-3.972,8.871-8.874,8.871H4.628z"/>
						</g>
					</svg>
				</button>
			</div>

			<% if current_user %>
			<div class="user_nav">
				<div>
					<button id="logout" class="btn-icon middle-parent">
						<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 520.349 520.349" xml:space="preserve">
							<g>
								<path d="M445.223,0H142.589c-6.683,0-12.105,5.423-12.105,12.105v180.979h16.65c-5.006-6.392-7.725-14.224-7.725-22.467
								c-0.006-9.764,3.8-18.943,10.708-25.845c1.421-1.421,2.973-2.687,4.583-3.845V24.211h278.417v8.697l-127.104,92.285v395.155
								l127.796-92.787c1.626,4.77,6.095,8.228,11.414,8.228c6.685,0,12.105-5.426,12.105-12.105V12.105
								C457.328,5.417,451.907,0,445.223,0z M354.031,331.973c-5.71,0-10.468-7.046-11.691-16.485h-13.63v-10.592h13.819
								c1.448-8.86,6.017-15.38,11.49-15.38c6.638,0,12.011,9.498,12.011,21.231C366.042,322.468,360.663,331.973,354.031,331.973z
								 M150.122,314.471c1.424,1.412,2.967,2.678,4.572,3.824v105.389c0,6.68-5.426,12.105-12.105,12.105
								c-6.683,0-12.105-5.426-12.105-12.105V266.139h16.65C135.948,280.466,136.935,301.271,150.122,314.471z M236.706,218.385
								c4.817,4.817,4.817,12.608,0,17.425l-58.995,59.001c-2.403,2.394-5.556,3.605-8.709,3.611c-3.153-0.006-6.307-1.206-8.71-3.611
								c-4.811-4.817-4.805-12.613,0-17.419l37.974-37.977H75.336c-6.803,0-12.315-5.512-12.315-12.315
								c0-6.803,5.506-12.318,12.321-12.318h122.917l-37.968-37.974c-4.805-4.805-4.811-12.608,0-17.413
								c4.812-4.812,12.614-4.812,17.425,0L236.706,218.385z"/>
							</g>
						</svg>
					</button>
				</div>
				<a>
					<span data-hover="Salir"><%= current_user.username %></span>
				</a>
			</div>
			<% end %>
		</header>

		<section id="body">
			<div id="bar-tool">
				<% if current_user %>
				<div id="section-file" class="section-bar">
					<div class="subtitle">
						<h1>Archivo</h1>
					</div>
					<div class="content">
						<button type="button" id="open" class="btn-icon" title="Abrir (cmd + f)">
							<span>
							<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 387.067 387.067" xml:space="preserve">
								<g>
									<path d="M160.289,42.104c0-5.154,4.181-9.335,9.342-9.335h57.903c5.154,0,9.337,4.181,9.337,9.335c0,5.16-4.183,9.34-9.337,9.34
									h-57.91C164.47,51.444,160.289,47.265,160.289,42.104z M169.624,210.201h57.899c5.154,0,9.348-4.18,9.348-9.335
									c0-5.154-4.183-9.336-9.348-9.336h-57.899c-5.154,0-9.34,4.182-9.34,9.336C160.289,206.021,164.47,210.201,169.624,210.201z
									 M317.923,350.295v25.567c0,6.182-5.02,11.205-11.209,11.205H80.351c-6.185,0-11.207-5.023-11.207-11.205v-25.567
									c0-5.22-12.112-9.564-7.289-10.811V11.207C61.856,5.021,66.877,0,73.062,0h240.942c6.187,0,11.206,5.021,11.206,11.207v328.277
									C330.035,340.73,317.923,345.075,317.923,350.295z M83.709,139.232c0,6.186,5.02,11.207,11.206,11.207h201.722
									c6.182,0,11.205-5.021,11.205-11.207V29.968c0-6.187-5.023-11.208-11.205-11.208H94.915c-6.186,0-11.206,5.021-11.206,11.208
									V139.232z M83.709,294.447c0,6.189,5.02,11.207,11.206,11.207h201.722c6.182,0,11.205-5.018,11.205-11.207V185.184
									c0-6.184-5.023-11.207-11.205-11.207H94.915c-6.186,0-11.206,5.023-11.206,11.207V294.447z"/>
								</g>
							</svg>
							</span>
						</button>

						<button type="button" id="newFile" class="btn-icon middle-parent" title="Nuevo documento (cmd + d)">
							<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 32 32" xml:space="preserve">
								<g>
									<path d="M22.414,0H4v32h24V5.584L22.414,0z M21.998,2.413L25.586,6h-3.588 C21.998,6,21.998,2.413,21.998,2.413z M26,30H6V1.998h14v6.001h6V30z"/>
								</g>
							</svg>
						</button>

						<button type="button" id="save" class="btn-icon middle-parent" title="Guardar (cmd + s)">
							<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 890 890" xml:space="preserve">
								<g>
									<path d="M0,840c0,27.6,22.4,50,50,50h790c27.6,0,50-22.4,50-50V50c0-27.6-22.4-50-50-50H50C22.4,0,0,22.4,0,50V840z M485.6,780.4 C485.6,802.8,467.4,821,445,821l0,0c-22.4,0-40.6-18.2-40.6-40.6V647.5c0-22.4,18.199-40.6,40.6-40.6l0,0 c22.4,0,40.6,18.199,40.6,40.6V780.4z M445,355.1c49.6,0,89.9,40.2,89.9,89.9s-40.2,89.9-89.9,89.9s-89.9-40.2-89.9-89.9 S395.4,355.1,445,355.1z M71.5,124.9c0-27.6,22.4-50,50-50H264c27.6,0,50,22.4,50,50v142.5c0,27.6-22.4,50-50,50H121.5 c-27.6,0-50-22.4-50-50V124.9z"/>
								</g>
							</svg>
						</button>
					</div>
				</div>
				<% end %>

				<div id="section-export" class="section-bar">
					<div class="subtitle">
						<h1>Descarga</h1>
					</div>
					<div class="content">
						<button type="button" id="capture" class="btn-icon middle-parent" title="Captura de pantalla">
							<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 313.2 313.2" xml:space="preserve">
								<g>
									<path d="M32.503,97.2h-0.206C17.442,97.2,5.4,104.793,5.4,120.825V284.18c0,16.026,12.042,29.02,26.897,29.02h0.201
									c5.803,0,11.14-2.03,15.535-5.399h231.765c15.473,0,28.002-14.434,28.002-29.9v-140c0-15.467-12.529-29.9-28.002-29.9H189v-5.4
									v-5.4h8.101c13.395,0,24.3-10.902,24.3-24.3V27c0-14.908-12.087-27-27-27h-62.1C118.903,0,108,10.903,108,24.3v48.6
									c0,13.397,10.903,24.3,24.3,24.3h13.5v5.4v5.4H55.841C51.224,100.775,42.562,97.2,32.503,97.2z M118.8,43.2V20.569
									c0-6.446,11.567-9.769,22.032-9.769h48.505c10.462,0,15.862,3.322,15.862,9.769V43.2H118.8z M176.196,130.449
									c42.71,0,77.456,34.747,77.456,77.451s-34.746,77.451-77.456,77.451c-42.702,0-77.446-34.747-77.446-77.451
									S133.495,130.449,176.196,130.449z"/>
									<circle cx="176.201" cy="207.899" r="59.486"/>
									<path d="M132.3,102.6c-16.379,0-29.7-13.326-29.7-29.7v2.7c0,14.908,12.089,27,27,27H132.3z"/>
								</g>
							</svg>
						</button>

						<div class="btn-group">
							<button type="button"id="export" class="btn-icon middle-parent" title="Exportar">
								<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 537.794 537.795" xml:space="preserve">
									<g>
										<path d="M463.091,466.114H74.854c-11.857,0-21.497,9.716-21.497,21.497v28.688c0,11.857,9.716,21.496,21.497,21.496h388.084
											c11.857,0,21.496-9.716,21.496-21.496v-28.688C484.665,475.677,474.949,466.114,463.091,466.114z"/>
										<path d="M253.94,427.635c4.208,4.208,9.716,6.35,15.147,6.35c5.508,0,11.016-2.142,15.147-6.35l147.033-147.033
											c8.339-8.338,8.339-21.955,0-30.447l-20.349-20.349c-8.339-8.339-21.956-8.339-30.447,0l-75.582,75.659V21.497
											C304.889,9.639,295.173,0,283.393,0h-28.688c-11.857,0-21.497,9.562-21.497,21.497v284.044l-75.658-75.659
											c-8.339-8.338-22.032-8.338-30.447,0l-20.349,20.349c-8.338,8.338-8.338,22.032,0,30.447L253.94,427.635z"/>
									</g>
								</svg>
							</button>
							
							<ul class="dropdown-menu">
								<li>
									<a id="pngDownload" download="treeva.png">
										<button type="button" id="png" class="btn-icon middle-parent" title="PNG">
											<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 550.801 550.801" xml:space="preserve">
												<g>
													<path d="M151.951,414.103c-5.677,0-9.526,0.554-11.541,1.107v36.492c2.381,0.554,5.313,0.732,9.352,0.732
														c14.851,0,24.026-7.524,24.026-20.171C173.794,420.884,165.905,414.103,151.951,414.103z"/>
													<polygon points="353.668,141.89 353.711,141.906 353.711,141.89 		"/>
													<path d="M475.095,131.992c-0.032-2.526-0.844-5.021-2.568-6.993L366.324,3.694c-0.021-0.034-0.053-0.045-0.084-0.076
														c-0.633-0.707-1.36-1.29-2.141-1.804c-0.232-0.15-0.465-0.285-0.707-0.422c-0.686-0.366-1.393-0.67-2.131-0.892
														c-0.2-0.058-0.379-0.14-0.59-0.192C359.87,0.114,359.037,0,358.203,0H97.2C85.292,0,75.6,9.693,75.6,21.601v507.6
														c0,11.913,9.692,21.601,21.6,21.601H453.6c11.908,0,21.601-9.688,21.601-21.601V133.202
														C475.2,132.796,475.137,132.398,475.095,131.992z M190.107,460.867c-9.537,8.986-23.657,13.025-40.165,13.025
														c-3.673,0-6.982-0.189-9.537-0.554v44.196h-27.696V395.582c8.617-1.466,20.725-2.568,37.779-2.568
														c17.23,0,29.531,3.296,37.776,9.903c7.881,6.229,13.204,16.501,13.204,28.608C201.479,443.623,197.445,453.906,190.107,460.867z
														 M321.616,517.535h-29.341l-26.412-47.682c-7.349-13.205-15.412-29.152-21.477-43.644l-0.538,0.18
														c0.738,16.326,1.094,33.744,1.094,53.915v37.23h-25.671V393.932h32.643l25.684,45.293c7.325,13.025,14.671,28.424,20.161,42.367
														h0.554c-1.841-16.321-2.384-33.012-2.384-51.532v-36.123h25.687V517.535L321.616,517.535z M449.086,511.851
														c-8.617,2.933-24.943,6.972-41.27,6.972c-22.55,0-38.887-5.685-50.251-16.695c-11.364-10.632-17.613-26.769-17.429-44.925
														c0.18-41.075,30.08-64.552,70.601-64.552c15.958,0,28.255,3.111,34.304,6.048l-5.864,22.376
														c-6.797-2.933-15.229-5.316-28.803-5.316c-23.282,0-40.891,13.205-40.891,39.973c0,25.497,15.957,40.532,38.887,40.532
														c6.417,0,11.554-0.728,13.753-1.835v-25.861h-19.074v-21.821h46.032v65.105H449.086z M97.2,366.752V21.601h250.203v77.69h6.75
														v42.599h42.156v1.026h57.29l0.011,223.836H97.2z"/>
													<polygon points="184.328,269.687 226.178,269.687 226.178,227.093 184.022,227.093 184.022,184.491 226.178,184.491 
														226.178,141.89 184.022,141.89 184.022,99.291 141.42,99.291 141.42,141.89 183.579,141.89 183.579,184.491 141.42,184.491 
														141.42,227.093 183.579,227.093 183.579,269.687 141.739,269.687 141.739,312.293 183.898,312.293 183.898,354.887 
														226.481,354.887 226.481,312.293 184.328,312.293 		"/>
													<polygon points="269.401,269.687 311.249,269.687 311.249,227.093 269.093,227.093 269.093,184.491 311.249,184.491 
														311.249,141.89 269.093,141.89 269.093,99.291 226.481,99.291 226.481,141.89 268.64,141.89 268.64,184.491 226.481,184.491 
														226.481,227.093 268.64,227.093 268.64,269.687 226.8,269.687 226.8,312.293 268.958,312.293 268.958,354.887 311.555,354.887 
														311.555,312.293 269.401,312.293 		"/>
													<path d="M311.555,141.89h42.113c-3.691-1.716-6.265-5.432-6.265-9.774V99.291h-35.849V141.89z"/>
													<path d="M353.711,141.906v42.585h-42.156v42.602h42.156v42.594H311.86v42.602h42.167v42.599h42.593v-42.599h-42.15v-42.602h41.84
														v-42.594h-42.156v-42.602h42.156v-41.575h-38.106C356.59,142.916,355.082,142.539,353.711,141.906z"/>
												</g>
											</svg>
										</button>
									</a>
								</li>
								<li>
									<a id="latexDownload" download="treen.txt">	
										<button type="button" id="latex" class="btn-icon middle-parent" title="LaTeX">
										<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 548.291 548.291" xml:space="preserve">
											<g>
												<path d="M472.929,131.39c-0.031-2.514-0.829-4.997-2.556-6.96L364.656,3.677c-0.021-0.034-0.053-0.044-0.084-0.075
													c-0.63-0.704-1.354-1.284-2.132-1.796c-0.23-0.149-0.462-0.283-0.703-0.419c-0.683-0.365-1.387-0.667-2.121-0.888
													c-0.2-0.058-0.377-0.139-0.577-0.191C358.231,0.113,357.411,0,356.572,0H96.757C84.904,0,75.255,9.649,75.255,21.502V526.79
													c0,11.858,9.649,21.501,21.502,21.501h354.775c11.863,0,21.503-9.643,21.503-21.501V132.595
													C473.036,132.191,472.971,131.795,472.929,131.39z M226.48,418.578h-32.315v95.88h-26.866v-95.88h-31.78V396.1h90.961V418.578z
													 M316.234,514.458h-75.512V396.1h73.055v21.952h-46.191v24.585h43.558v21.778h-43.558v28.096h48.648V514.458z M396.855,514.458
													l-10.709-21.422c-4.388-8.253-7.202-14.399-10.541-21.25h-0.346c-2.457,6.851-5.449,12.997-9.134,21.25l-9.832,21.422h-30.558
													l34.242-59.89L326.964,396.1h30.729l10.363,21.597c3.512,7.201,6.152,12.997,8.955,19.669h0.353
													c2.808-7.549,5.085-12.824,8.079-19.669l10.004-21.597h30.562l-33.365,57.774l35.118,60.583H396.855z M96.757,365.081V21.502
													H345.82v110.011c0,5.935,4.81,10.751,10.752,10.751h94.961l0.011,222.816H96.757z"/>
												<g>
													<path d="M217.564,180.635v-25.021h-87.935v25.021h2.923c0.236-3.741,0.875-6.8,1.924-9.181c1.053-2.37,2.478-4.247,4.273-5.612
														c1.791-1.365,3.919-2.301,6.375-2.805c2.457-0.507,5.278-0.765,8.478-0.765h12.743v81.267c0,3.509-0.252,6.278-0.766,8.304
														c-0.507,2.026-1.221,3.565-2.158,4.612c-0.935,1.061-2.108,1.743-3.504,2.053c-1.396,0.312-3.042,0.467-4.919,0.467h-3.734v2.92
														h45.019v-2.92h-3.625c-1.874,0-3.503-0.134-4.905-0.413c-1.415-0.27-2.575-0.908-3.517-1.924c-0.93-1.009-1.657-2.553-2.155-4.614
														c-0.517-2.073-0.764-4.89-0.764-8.48v-81.272h14.966c6.002,0,10.541,1.387,13.625,4.155c3.076,2.769,5.042,7.504,5.903,14.208
														H217.564z"/>
													<path d="M288.072,276.539c-1.329,1.249-2.567,2.29-3.744,3.098c-1.164,0.818-2.514,1.465-4.03,1.933
														c-1.522,0.462-3.329,0.786-5.438,0.935c-2.105,0.156-4.675,0.23-7.719,0.23h-18.011c-2.26,0-3.974-0.111-5.139-0.348
														c-1.179-0.235-2.032-0.755-2.575-1.568c-0.549-0.823-0.856-2.01-0.932-3.57c-0.083-1.563-0.118-3.671-0.118-6.322v-35.074h23.271
														c3.431,0,6.16,0.257,8.182,0.764c2.025,0.509,3.608,1.365,4.738,2.575c1.127,1.21,1.947,2.822,2.451,4.854
														c0.515,2.027,0.961,4.564,1.343,7.596h2.93v-36.951h-2.93c-0.151,2.65-0.473,4.95-0.935,6.897c-0.462,1.95-1.312,3.546-2.52,4.801
														c-1.207,1.251-2.857,2.176-4.965,2.803c-2.103,0.619-4.869,0.937-8.3,0.937h-23.271v-41.982h29.119
														c3.579,0,6.524,0.173,8.825,0.528c2.304,0.354,4.199,1.155,5.674,2.396c1.485,1.247,2.672,3.027,3.568,5.318
														c0.898,2.298,1.729,5.364,2.511,9.18h1.873v-23.266h-81.854v2.919h3.74c4.446,0,7.602,1.053,9.478,3.161
														c1.323,1.559,1.984,5.725,1.984,12.509v68.992c0,5.14-0.312,8.572-0.937,10.284c-0.312,0.939-0.853,1.748-1.633,2.456
														c-0.784,0.704-1.661,1.266-2.629,1.696c-0.984,0.431-2.01,0.761-3.1,0.997c-1.097,0.236-2.147,0.348-3.163,0.348h-3.74v2.917
														h81.854l9.239-26.653h-3.16C294.502,268.637,291.189,273.505,288.072,276.539z"/>
													<path d="M398.403,252.639c-1.753-0.504-3.548-1.501-5.379-2.984c-1.838-1.483-3.822-3.638-5.965-6.488
														c-2.142-2.842-4.851-6.681-8.12-11.52l-22.809-34.024l21.045-27.011c4.446-5.609,7.752-9.349,9.946-11.226
														c2.028-1.795,4.147-3.237,6.379-4.325c2.215-1.093,5.118-1.754,8.709-1.99v-2.918h-37.66v2.918
														c4.212,0.161,7.162,0.627,8.835,1.402c1.686,0.784,2.516,2.306,2.516,4.564c0,0.63-0.042,1.179-0.116,1.64
														c-0.073,0.467-0.272,0.995-0.582,1.58c-0.314,0.585-0.782,1.329-1.402,2.226c-0.623,0.893-1.521,2.084-2.688,3.557l-18.83,23.977
														l-16.366-24.439c-2.506-3.663-3.739-6.477-3.739-8.417c0-1.478,0.773-2.822,2.337-4.032c1.554-1.21,4.399-1.892,8.536-2.053
														v-2.918h-49.124v2.918c2.649,0.161,5.064,0.527,7.254,1.113c2.184,0.585,4.347,1.602,6.489,3.042
														c2.141,1.447,4.366,3.468,6.666,6.074c2.299,2.614,4.893,6.026,7.773,10.236l20.931,30.633l-25.019,31.693
														c-2.184,2.725-4.284,5.16-6.32,7.3c-2.026,2.144-4.074,3.939-6.132,5.389c-2.08,1.438-4.23,2.577-6.489,3.443
														c-2.268,0.861-4.683,1.365-7.259,1.522v2.919h37.653v-2.919c-3.979-0.157-6.667-0.779-8.068-1.881
														c-1.4-1.087-2.104-2.446-2.104-4.087c0-0.545,0.021-1.052,0.058-1.52c0.036-0.467,0.215-1.01,0.524-1.64
														c0.321-0.617,0.805-1.402,1.465-2.344c0.662-0.93,1.617-2.176,2.866-3.741l22.326-28.527l18.01,27.242
														c1.093,1.717,1.986,3.076,2.688,4.097c0.704,1.011,1.229,1.851,1.576,2.512c0.352,0.667,0.566,1.166,0.64,1.515
														c0.09,0.354,0.121,0.732,0.121,1.113c0,2.268-0.688,4.021-2.046,5.268c-1.366,1.236-4.191,1.903-8.474,1.984v2.919h45.591v-2.919
														C402.241,253.435,400.153,253.148,398.403,252.639z"/>
												</g>
											</g>
										</svg>
										</button>
									</a>
								</li>
							</ul>
						</div>
					</div>
				</div>					

				<div id="section-record" class="section-bar">
					<div class="subtitle">
						<h1>Historial</h1>
					</div>
					<div class="content">
						<button type="button" id="undo" class="btn-icon middle-parent" title="Deshacer (cmd + z)">
							<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 38.324 38.324" xml:space="preserve">
								<g>
									<path d="M38.324,24.708c0-0.002,0-0.002,0-0.002c0-0.121,0-0.248,0-0.406h-0.02c-0.226-9.529-8.033-17.217-17.617-17.217
									c-9.725,0-17.635,7.91-17.635,17.635c0,0.115,0.02,0.223,0.031,0.334L2.831,25.06c0,0-1.76,0-2.49,0
									c-0.729-0.004-0.061,0.631-0.061,0.631l5.5,5.35c0,0,0.359,0.42,0.74,0.041c0.525-0.523,5.359-5.514,5.359-5.514
									s0.67-0.674-0.217-0.67c-0.891,0-2.303,0-2.303,0l-0.147,0.005c0.002-0.066,0.02-0.123,0.02-0.186
									c0-6.32,5.139-11.461,11.455-11.461c6.318,0,11.461,5.141,11.461,11.461c0,0.016,0.002,0.033,0.002,0.051c0,0.178,0,0.301,0,0.391
									c0,0-0.02,0.092,0,0.197c0.016,0.074,0.057,0.158,0.135,0.232c0.111,0.1,0.295,0.178,0.627,0.178c0.916,0,4.115-0.039,4.771-0.039
									c0.271,0,0.424-0.09,0.518-0.189c0.105-0.119,0.121-0.254,0.123-0.297l0,0c0-0.01,0-0.018,0-0.018c0-0.248,0-0.402,0-0.506l0,0
									c0-0.002,0-0.002,0-0.006C38.324,24.497,38.324,24.558,38.324,24.708z"/>
								</g>
							</svg>
						</button>
						<button type="button" id="redo" class="btn-icon middle-parent" title="Rehacer (cmd + shift + z)">
							<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 38.323 38.323" xml:space="preserve">
								<g>
									<path d="M0,24.708c0-0.002,0-0.002,0-0.002c0-0.121,0-0.248,0-0.406h0.021C0.248,14.771,8.053,7.083,17.635,7.083
									c9.729,0,17.639,7.91,17.639,17.635c0,0.115-0.023,0.223-0.035,0.334l0.252,0.008c0,0,1.76,0,2.49,0
									c0.732-0.004,0.062,0.631,0.062,0.631l-5.498,5.35c0,0-0.359,0.42-0.742,0.041c-0.525-0.523-5.357-5.514-5.357-5.514
									s-0.672-0.674,0.217-0.67c0.885,0,2.301,0,2.301,0l0.146,0.006c-0.004-0.066-0.018-0.123-0.018-0.186
									c0-6.32-5.139-11.461-11.457-11.461c-6.316,0-11.455,5.141-11.455,11.461c0,0.016-0.004,0.033-0.004,0.051c0,0.178,0,0.301,0,0.391
									c0,0,0.021,0.092,0,0.197c-0.018,0.074-0.055,0.158-0.137,0.232c-0.111,0.1-0.297,0.178-0.627,0.178
									c-0.918,0-4.117-0.039-4.77-0.039c-0.275,0-0.428-0.09-0.52-0.189c-0.101-0.12-0.12-0.255-0.122-0.298l0,0c0-0.01,0-0.018,0-0.018
									c0-0.248,0-0.402,0-0.506l0,0c0-0.002,0-0.002,0-0.006C0,24.497,0,24.558,0,24.708z"/>
								</g>
							</svg>
						</button>
					</div>
				</div>

				<div id="section-draw" class="section-bar">
					<div class="subtitle">
						<h1>Dibujo</h1>
					</div>
					<div class="content">
						<div class="btn-group">
							<button type="button" id="selection" class="btn-icon middle-parent" title="Seleccionar">
								<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 360.39 360.389" xml:space="preserve">
									<g>
										<path d="M301.123,173.306L118.995,3.265c-3.242-3.038-7.891-4.049-12.105-2.639c-4.211,1.404-7.317,5.006-8.086,9.389
										L55.602,255.404c-0.854,4.847,1.306,9.717,5.464,12.341c4.152,2.625,9.49,2.465,13.491-0.378l59.968-42.699l47.219,127.448
										c2.127,6.336,8.984,9.765,15.332,7.648l62.087-20.771c6.342-2.116,9.771-8.984,7.648-15.327l-47.228-127.43l73.596-1.975
										c4.905-0.13,9.262-3.215,11.006-7.802C305.929,181.85,304.717,176.654,301.123,173.306z M202.591,172.455
										c-3.842,0.109-7.4,2.004-9.599,5.163c-2.205,3.147-2.778,7.146-1.561,10.781l48.557,131.467l-39.111,13.075l-48.56-131.455
										c-1.224-3.647-4.093-6.502-7.743-7.679c-3.656-1.188-7.643-0.585-10.772,1.649l-49.216,35.027l34.206-194.281l144.19,134.636
										L202.591,172.455z"/>
									</g>
								</svg>
							</button>

							<ul class="dropdown-menu">
								<li>
									<button type="button" id="path" class="btn-icon middle-parent" title="Seleccionar ruta (cmd + shift + a)">
										<svg class="middleXY-child" vversion="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 22.723 22.723" xml:space="preserve">
											<g>
												<path d="M19.735,6.896c0.007,0.245-0.139,0.47-0.366,0.563L9.114,11.655
												c-0.071,0.03-0.147,0.044-0.223,0.044c-0.115,0-0.23-0.034-0.329-0.1c-0.163-0.11-0.261-0.293-0.261-0.489V3.433
												c0-0.19,0.092-0.369,0.246-0.479C8.702,2.844,8.9,2.814,9.08,2.876l10.255,3.481C19.568,6.435,19.726,6.651,19.735,6.896z
												 M9.991,20.66c0,1.156-1.539,2.063-3.502,2.063c-1.965,0-3.502-0.907-3.502-2.063c0-0.976,1.097-1.77,2.618-1.997V2.738
												c0-0.069,0.011-0.137,0.025-0.202c-0.395-0.24-0.662-0.67-0.662-1.167C4.968,0.613,5.582,0,6.337,0h0.539
												c0.756,0,1.369,0.613,1.369,1.369c0,0.584-0.367,1.079-0.881,1.275c0.004,0.032,0.01,0.062,0.01,0.094v15.925
												C8.894,18.89,9.991,19.684,9.991,20.66z M9.402,20.661c0-0.643-0.869-1.198-2.029-1.394v1.376c0,0.489-0.396,0.885-0.885,0.885
												s-0.885-0.396-0.885-0.885v-1.376c-1.16,0.196-2.029,0.751-2.029,1.394c0,0.799,1.335,1.474,2.913,1.474
												C8.068,22.134,9.402,21.46,9.402,20.661z"/>
											</g>
										</svg>
									</button>
								</li>
								<li>
									<button type="button" id="all" class="btn-icon middle-parent" title="Seleccionar todo (cmd + a)">
										<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 459 459" xml:space="preserve">
											<g>
												<path d="M0,51h51V0C22.95,0,0,22.95,0,51z M0,255h51v-51H0V255z M102,459h51v-51h-51V459z M0,153h51v-51H0V153z M255,0h-51v51h51
												V0z M408,0v51h51C459,22.95,436.05,0,408,0z M51,459v-51H0C0,436.05,22.95,459,51,459z M0,357h51v-51H0V357z M153,0h-51v51h51V0z
												 M204,459h51v-51h-51V459z M408,255h51v-51h-51V255z M408,459c28.05,0,51-22.95,51-51h-51V459z M408,153h51v-51h-51V153z M408,357
												h51v-51h-51V357z M306,459h51v-51h-51V459z M306,51h51V0h-51V51z M102,357h255V102H102V357z M153,153h153v153H153V153z"/>
											</g>
										</svg>
									</button>
								</li>
							</ul>
						</div>
					
						<div class="btn-group">
							<button type="button" id="new" class="btn-icon middle-parent" title="Nuevo">
								<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 77.834 77.833" xml:space="preserve">
									<g>
										<path d="M65.311,50.714c-1.264,0-2.482,0.191-3.634,0.541L46.766,23.076c2.062-2.234,3.336-5.209,3.336-8.482 c0-6.907-5.619-12.526-12.525-12.526c-6.907,0-12.526,5.619-12.526,12.526c0,4.093,1.982,7.722,5.027,10.009L15.995,51.214 c-1.104-0.319-2.265-0.5-3.47-0.5C5.618,50.714,0,56.333,0,63.24c0,6.907,5.618,12.526,12.525,12.526 c6.906,0,12.525-5.619,12.525-12.526c0-4.158-2.044-7.838-5.172-10.117l14.048-26.549c1.156,0.354,2.38,0.546,3.649,0.546 c2.054,0,3.989-0.507,5.702-1.388l14.545,27.49c-3.051,2.286-5.038,5.919-5.038,10.019c0,6.906,5.618,12.525,12.524,12.525 c6.907,0,12.525-5.619,12.525-12.525C77.834,56.332,72.218,50.714,65.311,50.714z M12.525,71.083c-4.326,0-7.844-3.519-7.844-7.844 c0-4.326,3.519-7.844,7.844-7.844c4.325,0,7.845,3.518,7.845,7.844S16.851,71.083,12.525,71.083z M29.731,14.594 c0-4.326,3.519-7.844,7.845-7.844s7.844,3.519,7.844,7.844c0,4.326-3.52,7.844-7.844,7.844 C33.251,22.438,29.731,18.92,29.731,14.594z M65.311,71.083c-4.326,0-7.845-3.519-7.845-7.844c0-4.326,3.519-7.844,7.845-7.844 s7.844,3.518,7.844,7.844S69.637,71.083,65.311,71.083z"/>
									</g>
								</svg>
							</button>

							<ul class="dropdown-menu">
								<li>
									<button type="button" id="nario" class="btn-icon middle-parent" title="Nuevo n-ario (1 + click)">
										<svg style="width:12px;" class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 316.812 316.811" xml:space="preserve">
											<g>
												<path d="M282.449,316.811h-51.211V129.319c0-28.827-5.024-49.358-15.085-61.597C206.105,55.49,189.413,49.37,166.09,49.37
												c-22.952,0-42.108,8.73-57.468,26.179c-15.362,17.448-23.049,42.489-23.049,75.108v166.154H34.362V0l48.365,12.105v42.963h1.138
												c24.054-34.52,54.734-51.781,92.048-51.781c34.472,0,60.846,9.149,79.122,27.452c18.275,18.306,27.414,44.526,27.414,78.667
												V316.811z"/>
											</g>
										</svg>
									</button>
								</li>
								<li>
									<button type="button" id="binary" class="btn-icon middle-parent" title="Nuevo binario (2 + click)" >
										<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 246.683 246.683" xml:space="preserve">
											<path d="M104.991,0.265H50.479c-4.142,0-7.5,3.358-7.5,7.5v95.553c0,4.142,3.358,7.5,7.5,7.5h54.512c4.142,0,7.5-3.358,7.5-7.5
											V7.765C112.491,3.623,109.133,0.265,104.991,0.265z M89.923,85.88H65.547V25.204h24.376V85.88z M140.163,32.369
											c-2.929-2.929-2.929-7.678,0-10.606l19.565-19.565C161.136,0.79,163.043,0,165.032,0c0.043,0.002,0.069,0,0.104,0
											c0.035,0,0.07,0,0.105,0h7.568c4.143,0,7.5,3.358,7.5,7.5v80.75h12.119c4.143,0,7.5,3.358,7.5,7.5v7.568c0,4.142-3.357,7.5-7.5,7.5
											h-46.807c-4.143,0-7.5-3.358-7.5-7.5V95.75c0-4.142,3.357-7.5,7.5-7.5h12.119V36.1l-1.62,1.621
											c-1.407,1.407-3.314,2.197-5.304,2.197s-3.896-0.79-5.304-2.197L140.163,32.369z M196.204,136.13h-54.512
											c-4.143,0-7.5,3.358-7.5,7.5v95.553c0,4.142,3.357,7.5,7.5,7.5h54.512c4.143,0,7.5-3.358,7.5-7.5V143.63
											C203.704,139.488,200.347,136.13,196.204,136.13z M181.137,221.745H156.76v-60.676h24.377V221.745z M108.717,231.615v7.568
											c0,4.142-3.358,7.5-7.5,7.5H54.41c-4.142,0-7.5-3.358-7.5-7.5v-7.568c0-4.142,3.358-7.5,7.5-7.5h12.119v-52.151l-1.621,1.621
											c-1.406,1.407-3.314,2.197-5.303,2.197c-1.989,0-3.897-0.791-5.304-2.197l-5.351-5.352c-2.929-2.929-2.928-7.678,0-10.606 l19.565-19.565c1.407-1.407,3.314-2.197,5.303-2.197c0.035,0,0.07,0,0.104,0c0.035,0,0.07,0,0.105,0h7.568
											c4.142,0,7.5,3.358,7.5,7.5v80.75h12.119C105.359,224.115,108.717,227.473,108.717,231.615z"/>
										</svg>
									</button>
								</li>
							</ul>
						</div>
						
						<div class="btn-group">
							<button type="button" id="add" class="btn-icon middle-parent" title="Agregar">
								<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 612 612" xml:space="preserve">
									<g id="_x38__3_">
										<path d="M306,0C136.992,0,0,136.992,0,306s136.992,306,306,306s306-137.012,306-306S475.008,0,306,0z M306,573.75
											C158.125,573.75,38.25,453.875,38.25,306C38.25,158.125,158.125,38.25,306,38.25c147.875,0,267.75,119.875,267.75,267.75
											C573.75,453.875,453.875,573.75,306,573.75z M420.75,286.875h-95.625V191.25c0-10.557-8.568-19.125-19.125-19.125
											c-10.557,0-19.125,8.568-19.125,19.125v95.625H191.25c-10.557,0-19.125,8.568-19.125,19.125c0,10.557,8.568,19.125,19.125,19.125
											h95.625v95.625c0,10.557,8.568,19.125,19.125,19.125c10.557,0,19.125-8.568,19.125-19.125v-95.625h95.625
											c10.557,0,19.125-8.568,19.125-19.125C439.875,295.443,431.307,286.875,420.75,286.875z"/>
									</g>
								</svg>
							</button>

							<ul class="dropdown-menu">
								<li>
									<button type="button" id="child" class="btn-icon middle-parent" title="Agregar hijo (x)">
										<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 612 612" xml:space="preserve">
											<g id="_x38__3_">
												<path d="M403.939,295.749l-78.814,78.833V172.125c0-10.557-8.568-19.125-19.125-19.125c-10.557,0-19.125,8.568-19.125,19.125
												v202.457l-78.814-78.814c-7.478-7.478-19.584-7.478-27.043,0c-7.478,7.478-7.478,19.584,0,27.042l108.19,108.19
												c4.59,4.59,10.863,6.005,16.812,4.953c5.929,1.052,12.221-0.382,16.811-4.953l108.19-108.19c7.478-7.478,7.478-19.583,0-27.042
												C423.523,288.29,411.417,288.29,403.939,295.749z M306,0C137.012,0,0,136.992,0,306s137.012,306,306,306s306-137.012,306-306
												S475.008,0,306,0z M306,573.75C158.125,573.75,38.25,453.875,38.25,306C38.25,158.125,158.125,38.25,306,38.25
												c147.875,0,267.75,119.875,267.75,267.75C573.75,453.875,453.875,573.75,306,573.75z"/>
											</g>
										</svg>
									</button>
								</li>
								<li>
									<button type="button" id="left" class="btn-icon middle-parent" title="Agregar izquierda (z)">
										<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 612 612" xml:space="preserve">
											<g>
												<path d="M439.875,286.875H237.418l78.813-78.814c7.479-7.478,7.479-19.584,0-27.043c-7.478-7.478-19.583-7.478-27.042,0
												l-108.19,108.19c-4.571,4.571-6.005,10.863-4.954,16.792c-1.052,5.929,0.383,12.221,4.973,16.811l108.19,108.19
												c7.478,7.478,19.584,7.478,27.043,0c7.478-7.478,7.478-19.584,0-27.043l-78.833-78.833h202.457
												c10.557,0,19.125-8.568,19.125-19.125C459,295.443,450.432,286.875,439.875,286.875z M306,0C136.992,0,0,136.992,0,306
												c0,168.988,136.992,306,306,306s306-137.012,306-306C612,136.992,475.008,0,306,0z M306,573.75
												C158.125,573.75,38.25,453.875,38.25,306C38.25,158.125,158.125,38.25,306,38.25c147.875,0,267.75,119.875,267.75,267.75
												C573.75,453.875,453.875,573.75,306,573.75z"/>
											</g>
										</svg>
									</button>
								</li>
								<li>
									<button type="button" id="right" class="btn-icon middle-parent" title="Agregar derecha (c)">
										<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 612 612" xml:space="preserve">
											<g>
												<path d="M431.001,289.189l-108.19-108.19c-7.478-7.478-19.583-7.478-27.042,0c-7.478,7.478-7.478,19.584,0,27.043l78.814,78.833
												H172.125C161.568,286.875,153,295.443,153,306c0,10.557,8.568,19.125,19.125,19.125h202.457l-78.814,78.814
												c-7.478,7.478-7.478,19.584,0,27.042c7.478,7.479,19.584,7.479,27.042,0l108.19-108.189c4.59-4.59,6.005-10.863,4.973-16.811
												C437.006,300.071,435.572,293.779,431.001,289.189z M306,0C136.992,0,0,136.992,0,306s136.992,306,306,306s306-137.012,306-306
												S475.008,0,306,0z M306,573.75C158.125,573.75,38.25,453.875,38.25,306C38.25,158.125,158.125,38.25,306,38.25
												c147.875,0,267.75,119.875,267.75,267.75C573.75,453.875,453.875,573.75,306,573.75z"/>
											</g>
										</svg>
									</button>	
								</li>
							</ul>
						</div>
				
						<button type="button" id="delete" class="btn-icon middle-parent" title="Eliminar (s)">
							<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 400 400" xml:space="preserve">
								<g>
									<path d="M199.991,0C89.715,0,0.002,89.72,0.002,200c0,110.279,89.713,200,199.989,200c110.281,0,200.007-89.721,200.007-200
										C399.998,89.72,310.272,0,199.991,0z M199.991,373.77c-95.81,0-173.759-77.953-173.759-173.77
										c0-95.817,77.949-173.77,173.759-173.77c95.821,0,173.775,77.953,173.775,173.77C373.768,295.816,295.812,373.77,199.991,373.77z"
										/>
									<path d="M279.476,186.884l-158.958,0.003c-7.242,0-13.115,5.873-13.115,13.115c0,7.243,5.873,13.116,13.115,13.116l158.958-0.005
										c7.243,0,13.115-5.872,13.115-13.114S286.719,186.884,279.476,186.884z"/>
								</g>
							</svg>
						</button>
					
						<button type="button" id="cut" class="btn-icon middle-parent" title="Cortar (cmd + x)">
							<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 25.708 25.708" xml:space="preserve">
								<g>
									<path d="M23.354,7.23c0,0-1.439-1.239-2.652-0.548c-0.934,0.537-6.867,3.514-9.514,4.84L7.44,9.379
										C7.847,8.658,7.915,7.824,7.696,7.02c-0.277-1.016-1.01-1.979-2.092-2.598C3.659,3.307,1.321,3.731,0.388,5.369
										c-0.416,0.723-0.484,1.563-0.266,2.373c0.277,1.016,1.01,1.98,2.092,2.602c0.478,0.27,0.976,0.449,1.471,0.541v0.001
										c0.004,0.001,0.008,0.001,0.012,0.003c0.039,0.006,0.084,0.015,0.127,0.02c3.086,0.459,4.664,1.33,5.43,1.944
										c-0.766,0.616-2.344,1.485-5.43,1.945c-0.043,0.005-0.088,0.013-0.127,0.019c-0.004,0.002-0.008,0.002-0.012,0.004l0,0
										c-0.494,0.092-0.992,0.271-1.471,0.542c-1.082,0.622-1.814,1.585-2.092,2.602c-0.219,0.808-0.15,1.648,0.266,2.375
										c0.934,1.635,3.271,2.061,5.217,0.946c1.082-0.621,1.814-1.584,2.092-2.602c0.219-0.803,0.15-1.635-0.256-2.357l3.748-2.142
										c2.646,1.325,8.58,4.305,9.514,4.839c1.213,0.691,2.652-0.547,2.652-0.547l-9.838-5.624L23.354,7.23z M5.843,8.487
										C5.417,9.229,4.173,9.35,3.126,8.751C2.511,8.401,2.048,7.843,1.89,7.263C1.821,7.004,1.776,6.625,1.978,6.278
										c0.424-0.741,1.668-0.862,2.715-0.264c0.625,0.355,1.074,0.898,1.234,1.488C5.999,7.758,6.04,8.139,5.843,8.487z M5.927,18.203
										c-0.16,0.591-0.609,1.133-1.234,1.489c-1.047,0.6-2.291,0.478-2.715-0.265c-0.201-0.348-0.156-0.726-0.088-0.982
										c0.158-0.582,0.621-1.14,1.236-1.492c1.047-0.598,2.291-0.477,2.717,0.266C6.04,17.569,5.999,17.947,5.927,18.203z"/>
									<rect x="15.864" y="12.367" width="2.41" height="0.992"/>
									<rect x="19.478" y="12.367" width="2.408" height="0.992"/>
									<rect x="23.302" y="12.357" width="2.406" height="0.991"/>
									<g>
								</svg>
						</button>

						<button type="button" id="copy" class="btn-icon middle-parent" title="Copiar (cmd + c)">
							<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 352.253 352.253" xml:space="preserve">
								<g>
									<path d="M257.815,48.693V0H44.64v303.543l49.798,0.006v48.687l152.113,0.018l61.062-60.449V48.693H257.815z M65.269,20.642 h171.896v215.947h-46.669v46.321H65.269V20.642z M286.97,285.288h-46.682v46.321H115.067v-28.055l81.674,0.012l61.074-60.456 V69.334h29.154V285.288z"/>
								</g>
							</svg>
						</button>

						<button type="button" type="button" id="paste" class="btn-icon middle-parent" title="Pegar (cmd + v)" disabled>
							<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 83.618 83.618" xml:space="preserve">
								<g>
									<path stroke-width="2" d="M12.713,72.139h27.678v2.723H12.713c-1.752,0-3.178-1.426-3.178-3.178V8.143c0-1.752,1.426-3.177,3.178-3.177h10.171
									l-0.367,1.656c-0.031,0.139-0.046,0.266-0.046,0.386v7.262c0,1.001,0.814,1.815,1.815,1.815h24.962
									c1.001,0,1.816-0.814,1.816-1.815V7.008c0-0.121-0.017-0.247-0.047-0.386l-0.367-1.656h10.172C62.575,4.966,64,6.391,64,8.143
									v29.163l-0.354-0.308h-2.369V8.143c0-0.25-0.202-0.454-0.452-0.454h-7.035v6.581c0,2.502-2.036,4.539-4.539,4.539H24.288
									c-2.503,0-4.539-2.036-4.539-4.539V7.689h-7.034c-0.25,0-0.454,0.204-0.454,0.454v63.541C12.26,71.934,12.463,72.139,12.713,72.139
									z M25.784,14.38h21.97c0.884,0,1.599-0.715,1.599-1.598V6.391c0-0.883-0.715-1.598-1.599-1.598h-5.991
									C41.763,2.146,39.514,0,36.742,0c-2.774,0-5.022,2.146-5.022,4.793h-5.935c-0.883,0-1.597,0.715-1.597,1.598v6.391
									C24.187,13.664,24.9,14.38,25.784,14.38z M74.083,46.426v34.825c0,1.306-1.062,2.367-2.365,2.367H44.385
									c-1.305,0-2.366-1.062-2.366-2.367V41.135c0-1.306,1.062-2.367,2.366-2.367h20.889L74.083,46.426z M65.815,45.811h4.935
									l-4.935-4.289V45.811z M72.358,47.536h-8.269v-7.044H44.385c-0.354,0-0.642,0.288-0.642,0.643v40.116
									c0,0.354,0.287,0.644,0.642,0.644h27.332c0.354,0,0.641-0.289,0.641-0.644V47.536z M46.623,55.73c0,0.713,0.581,1.293,1.293,1.293
									h20.271c0.713,0,1.293-0.58,1.293-1.293c0-0.715-0.58-1.295-1.293-1.295H47.916C47.205,54.436,46.623,55.016,46.623,55.73z
									 M68.186,62.055H47.916c-0.712,0-1.293,0.58-1.293,1.295c0,0.713,0.581,1.293,1.293,1.293h20.271c0.713,0,1.293-0.58,1.293-1.293
									C69.479,62.635,68.899,62.055,68.186,62.055z M68.186,69.282H47.916c-0.712,0-1.293,0.579-1.293,1.294
									c0,0.714,0.581,1.293,1.293,1.293h20.271c0.713,0,1.293-0.579,1.293-1.293C69.479,69.861,68.899,69.282,68.186,69.282z"/>
								</g>
							</svg>
						</button>
					
						<button type="button" id="contract" class="btn-icon middle-parent" title="Contraer/expandir (n)">
							<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 32 32" xml:space="preserve">
								<g>
									<polygon points="22.586,25.414 29.172,32 32,29.172 25.414,22.586 28,20 20,20 20,28"/>
									<polygon points="6.547,9.371 4,12 11.961,11.957 12,4 9.375,6.543 2.828,0 0,2.828"/>
									<polygon points="0,29.172 2.828,32 9.414,25.414 12,28 12,20 4,20 6.586,22.586"/>
									<polygon points="28.031,12 25.438,9.404 32,2.838 29.164,0 22.598,6.566 20,3.971 20,12"/>
								</g>
							</svg>
						</button>
					
						<button type="button" id="scale" class="btn-icon middle-parent active" title="Escalar (m)">
							<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 466.465 466.465" xml:space="preserve">
								<g>
									<path d="M137.383,428.364c0,6.027,4.886,10.914,10.914,10.914h42.066c6.028,0,10.914-4.887,10.914-10.914
									v-9.034c0-6.027-4.886-10.914-10.914-10.914h-42.066c-6.028,0-10.914,4.887-10.914,10.914V428.364z"/>
									<path d="M265.18,428.364c0,6.027,4.886,10.914,10.914,10.914h42.074c6.028,0,10.914-4.887,10.914-10.914
									v-9.034c0-6.027-4.886-10.914-10.914-10.914h-42.074c-6.028,0-10.914,4.887-10.914,10.914V428.364z"/>
									<path d="M58.049,148.305c0-6.027-4.887-10.914-10.914-10.914h-9.034c-6.027,0-10.914,4.887-10.914,10.914
									v42.066c0,6.027,4.887,10.914,10.914,10.914h9.034c6.027,0,10.914-4.887,10.914-10.914V148.305z"/>
									<path d="M439.278,148.305c0-6.027-4.886-10.914-10.914-10.914h-9.035c-6.027,0-10.914,4.887-10.914,10.914
									v42.066c0,6.027,4.887,10.914,10.914,10.914h9.035c6.028,0,10.914-4.887,10.914-10.914V148.305z"/>
									<path d="M27.187,318.176c0,6.027,4.886,10.914,10.914,10.914h9.034c6.027,0,10.914-4.887,10.914-10.914
									v-42.065c0-6.027-4.886-10.914-10.914-10.914h-9.034c-6.027,0-10.914,4.887-10.914,10.914V318.176z"/>
									<path d="M137.383,47.133c0,6.027,4.886,10.914,10.914,10.914h42.073c6.028,0,10.914-4.887,10.914-10.914
									V38.1c0-6.027-4.886-10.914-10.914-10.914h-42.073c-6.028,0-10.914,4.887-10.914,10.914V47.133z"/>
									<path d="M265.188,47.134c0,6.027,4.886,10.914,10.914,10.914h42.065c6.028,0,10.914-4.887,10.914-10.914
									V38.1c0-6.027-4.886-10.914-10.914-10.914h-42.065c-6.028,0-10.914,4.887-10.914,10.914V47.134z"/>
									<path d="M408.415,318.16c0,6.027,4.886,10.914,10.914,10.914h9.035c6.027,0,10.914-4.887,10.914-10.914
									v-42.067c0-6.027-4.887-10.914-10.914-10.914h-9.035c-6.028,0-10.914,4.887-10.914,10.914V318.16z"/>
									<path  d="M85.227,10.927c0-6.028-4.89-10.911-10.917-10.911H10.927c-6.027,0-10.918,4.883-10.918,10.911
									v63.398c0,6.027,4.891,10.91,10.918,10.91h63.386c6.028,0,10.914-4.887,10.914-10.914V10.927z"/>
									<path d="M85.227,392.155c0-6.027-4.89-10.909-10.917-10.909H10.927c-6.029,0-10.919,4.882-10.919,10.909
									v63.398c0,6.028,4.89,10.911,10.919,10.911h63.382c6.028,0,10.917-4.883,10.917-10.911V392.155z"/>
									<path d="M455.539,0h-63.383c-6.028,0-10.917,4.883-10.917,10.911V74.31c0,6.027,4.89,10.909,10.917,10.909
									h63.383c6.028,0,10.918-4.882,10.918-10.909V10.911C466.457,4.883,461.567,0,455.539,0z"/>
									<path d="M455.539,381.246h-63.383c-6.028,0-10.917,4.882-10.917,10.909v63.398
									c0,6.028,4.89,10.911,10.917,10.911h63.383c6.028,0,10.918-4.883,10.918-10.911v-63.398
									C466.457,386.128,461.567,381.246,455.539,381.246z"/>
								</g>
							</svg>
						</button>
					</div>
				</div>

				<!--<div id="section-help" class="section-bar">
					<div class="subtitle">
						<h1>Ayuda</h1>
					</div>
					<div class="wrap-button">
						<button id="help" type="button" class="btn-icon middle-parent" title="Ayuda">
							<svg class="middleXY-child" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 27.774 27.774" xml:space="preserve">
								<g>
									<path d="M10.398,22.811h4.618v4.964h-4.618V22.811z M21.058,1.594C19.854,0.532,17.612,0,14.33,0c-3.711,0-6.205,0.514-7.482,1.543
									c-1.277,1.027-1.916,3.027-1.916,6L4.911,8.551h4.577l-0.02-1.049c0-1.424,0.303-2.377,0.907-2.854
									c0.604-0.477,1.814-0.717,3.632-0.717c1.936,0,3.184,0.228,3.74,0.676c0.559,0.451,0.837,1.457,0.837,3.017
									c0,1.883-0.745,3.133-2.237,3.752l-1.797,0.766c-1.882,0.781-3.044,1.538-3.489,2.27c-0.442,0.732-0.665,2.242-0.665,4.529h4.68
									v-0.646c0-1.41,0.987-2.533,2.965-3.365c2.03-0.861,3.343-1.746,3.935-2.651c0.592-0.908,0.888-2.498,0.888-4.771
									C22.863,4.625,22.261,2.655,21.058,1.594z"/>
								</g>
							</svg>
						</button>
					</div>
				</div>-->
			</div>
			
			<div id="bar-style">
				<div id="mode" class="tabs tabs-style-fillup">
					<nav>
						<ul>
							<li>
								<a href="#view">Info</a>
							</li>
							<li>
								<a href="#edit">Estilo</a>
							</li>
						</ul>
					</nav>

					<div class="content-wrap">
						<section id="view" class="container-tab">
							<div class="content-tab">
								<fieldset>
									<legend>Árbol</legend>
									<div class="field">
										<div class="section group">
											<div class="col span_2_of_3">
												<label>Tipo</label>
											</div>
											<div class="col span_1_of_3">
												<output type="text" name="typeTree" id="typeTree" value=""></output>
											</div>
										</div>
									</div>
									<div class="field">
										<div class="section group">
											<div class="col span_2_of_3">
												<label>Max. grado</label>
											</div>
											<div class="col span_1_of_3">
												<output type="text" name="grade" id="grade" value=""></output>
											</div>
										</div>
									</div>
									<div class="field">
										<div class="section group">
											<div class="col span_2_of_3">
												<label>Max. nivel</label>
											</div>
											<div class="col span_1_of_3">
												<output type="text" name="level" id="level" value=""></output>
											</div>
										</div>
									</div>
								</fieldset>
								<fieldset>	
									<legend>Nodo</legend>
									<div class="field">
										<div class="section group">
											<div class="col span_2_of_3">
												<label>Grado</label>
											</div>
											<div class="col span_1_of_3">
												<output type="text" name="gradeNode" id="gradeNode" value=""></output>
											</div>
										</div>
									</div>
									<div class="field">
										<div class="section group">
											<div class="col span_2_of_3">
												<label>Nivel</label>
											</div>
											<div class="col span_1_of_3">
												<output type="text" name="levelNode" id="levelNode" value=""></output>
											</div>
										</div>
									</div>
								</fieldset>
								<fieldset>
									<div class="field">
										<label>Observaciones</label>
										<textarea readonly id="opcional-view" rows="11" width="100%" style="height:140px" maxlength="255" name="opcional-view"></textarea>
									</div>
								</fieldset>
							</div>
						</section>

						<section id="edit" class="container-tab">
							<div id="mode-edit" class="tabs tabs-style-topline">
								<nav>
									<ul>
										<li><a href="#edit-node">Nodo</a></li>
										<li><a href="#edit-edge">Arista</a></li>
										<li><a href="#edit-text">Texto</a></li>
									</ul>
								</nav>

								<div class="content-wrap">
									<section id="edit-node" class="container-tab">
										<div class="content-tab">		
											<fieldset>
												<legend>Forma y Relleno</legend>
												<div class="field">
													<div class="section group">
														<div class="col span_1_of_2">
															<label>Figura</label>
														</div>
														<div class="col span_1_of_2">
															<div class="wrap-btn-icon-mini" id="shapeNode">
																<button data-shape="arc" type="button" class="btn-icon-mini middle-parent">
																	<div id="shape-arc" class="shape middleXY-child">&nbsp;</div>
																</button>
																<button data-shape="rect" type="button" class="btn-icon-mini middle-parent">
																	<div id="shape-rect" class="shape middleXY-child"></div>
																</button>
															</div>
														</div>
													</div>
												</div>
												<div class="field">
													<div class="section group">
														<div class="col span_1_of_2">
															<label>Color</label>
														</div>
														<div class="col span_1_of_2">
															<div class="wrap-btn-icon-mini" id="fillStyleNode">
																<button type="button" class="btn-icon-mini middle-parent">
																	<div class="color white middleXY-child"></div>
																</button>
																<button type="button" class="btn-icon-mini middle-parent">
																	<div class="color blue middleXY-child"></div>
																</button>
																<button type="button" class="btn-icon-mini middle-parent">
																	<div class="color yellow middleXY-child"></div>
																</button>
																<button type="button" class="btn-icon-mini middle-parent">
																	<div class="color green middleXY-child"></div>
																</button>
																<button type="button" class="btn-icon-mini middle-parent">
																	<div class="color red middleXY-child"></div>
																</button>
															</div>
														</div>
													</div>
												</div>
												<div class="field">
													<div class="section group">
														<div class="col span_1_of_2">
															<label class="col span_1_of_2">Ancho</label>
														</div>
														<div class="col span_1_of_2">
															<input id="rangeWidthNode" type="range" name="rangeWidthNode" value="20" step="10" min="10" max="200" style="margin-bottom:0;"> 
															<div class="section group">
																<div class="col span_2_of_3">
																	<input id="widthNode" name="widthNode" type="number" value="20" min="10" onkeypress='return event.charCode >= 48 && event.charCode <= 57'/>
																</div>
																<div class="col span_1_of_3">
																	<span id="postfix-widthNode" class="postfix">px</span>
																</div>
															</div>
														</div>
													</div>
												</div>
												<div class="field">
													<div class="section group">
														<div class="col span_1_of_2">
															<label>Alto</label>
														</div>
														<div class="col span_1_of_2">
															<input id="rangeHeightNode" type="range" name="rangeHeightNode" value="20" step="10" min="10" max="200" style="margin-bottom:0;"> 
															<div class="section group">
																<div class="col span_2_of_3">
																	<input id="heightNode" name="heightNode" type="number" value="20" min="10" onkeypress='return event.charCode >= 48 && event.charCode <= 57'/>
																</div>
																<div class="col span_1_of_3">
																	<span id="postfix-heightNode" class="postfix">px</span>
																</div>
															</div> 
														</div>
													</div>
												</div>
											</fieldset>
												
											<fieldset>	
												<legend>Borde</legend>
												<div class="field">
													<div class="section group">
														<div class="col span_1_of_2">
															<label>Color</label>
														</div>
														<div class="col span_1_of_2">
															<div class="wrap-btn-icon-mini" id="strokeStyleNode">
																<button type="button" class="btn-icon-mini middle-parent">
																	<div class="color black middleXY-child"></div>
																</button>
																<button type="button" class="btn-icon-mini middle-parent">
																	<div class="color blue middleXY-child"></div>
																</button>
																<button type="button" class="btn-icon-mini middle-parent">
																	<div class="color yellow middleXY-child"></div>
																</button>
																<button type="button" class="btn-icon-mini middle-parent">
																	<div class="color green middleXY-child"></div>
																</button>
																<button type="button" class="btn-icon-mini middle-parent">
																	<div class="color red middleXY-child"></div>
																</button>
															</div>
														</div>
													</div>
												</div>
												<div class="field">
													<div class="section group">
														<div class="col span_1_of_2">
															<label>Tipo</label>
														</div>
														<div class="col span_1_of_2">
															<select id="lineDashNode" name="lineDashNode">
															 	<option value="1">Línea</option>
																<option value="2">Guión</option>
															 	<option value="3">Ninguno</option>
															</select>
														</div>
													</div>
												</div>
												<div class="field">
													<div class="section group">
														<div class="col span_1_of_2">
															<label>Grosor</label>
														</div>
														<div class="col span_1_of_2">
															<div class="section group">
																<div class="col span_2_of_4">
																	<input id="rangeLineWidthNode" type="range" name="rangeLineWidthNode" value="1" step="1" min="0" max="10" style="margin-top: 8px;">
																</div>
																<div class="col span_2_of_4" style="text-align:right">
																	<output id="lineWidthNode" name="lineWidthNode" for="rangeLineWidthNode"></output>
																	<output id="postfix-lineWidthNode" class="postfix-mini">px</output>
																</div>
															</div>
														</div>
													</div>
												</div>
											</fieldset>
												
											<fieldset>
												<legend>Distancia entre nodos</legend>
												<div class="field">
													<div class="section group">
														<div class="col span_1_of_2">
															<label class="col span_1_of_2">Vertical</label>
														</div>
														<div class="col span_1_of_2">
															<input id="rangeMarginTop" type="range" name="rangeMarginTop" value="70" step="10" min="0" max="500" style="margin-bottom:0;">
															<div class="section group">
																<div class="col span_2_of_3">
																	<input id="marginTop" name="marginTop" type="number" value="70" min="0" onkeypress='return event.charCode >= 48 && event.charCode <= 57'/>
																</div>
																<div class="col span_1_of_3">
																	<span id="postfix-marginTop" class="postfix">px</span>
																</div>
															</div>  	
														</div>
													</div>
												</div>
												<div class="field">
													<div class="section group">
														<div class="col span_1_of_2">
															<label class="col span_1_of_2">Horizontal</label>
														</div>
														<div class="col span_1_of_2">
															<input id="rangeMarginLeft" type="range" name="rangeMarginLeft" value="10" step="10" min="0" max="500" style="margin-bottom:0;"> 	
															<div class="section group">
																<div class="col span_2_of_3">
																	<input id="marginLeft" name="marginLeft" type="number" value="10" min="0" onkeypress='return event.charCode >= 48 && event.charCode <= 57'/>
																</div>
																<div class="col span_1_of_3">
																	<span id="postfix-marginLeft" class="postfix">px</span>
																</div>
															</div>
														</div>
													</div>
												</div>
											</fieldset>
										</div>
									</section>

									<section id="edit-edge" class="container-tab">
										<div class="content-tab">
											<fieldset>
												<div class="field">
													<div class="section group">
														<div class="col span_1_of_2">
															<label>Color</label>
														</div>
														<div class="col span_1_of_2">
															<div class="wrap-btn-icon-mini" id="strokeStyleEdge">
																<button data-color="black" type="button" class="btn-icon-mini middle-parent">
																	<div class="color black middleXY-child"></div>
																</button>
																<button data-color="blue" type="button" class="btn-icon-mini middle-parent">
																	<div class="color blue middleXY-child"></div>
																</button>
																<button data-color="yellow" type="button" class="btn-icon-mini middle-parent">
																	<div class="color yellow middleXY-child"></div>
																</button>
																<button data-color="green" type="button" class="btn-icon-mini middle-parent">
																	<div class="color green middleXY-child"></div>
																</button>
																<button data-color="red" type="button" class="btn-icon-mini middle-parent">
																	<div class="color red middleXY-child"></div>
																</button>
															</div>
														</div>
													</div>
												</div>
												<div class="field">
													<div class="section group">
														<div class="col span_1_of_2">
															<label>Tipo</label>
														</div>
														<div class="col span_1_of_2">
															<select id="lineDashEdge" name="lineDashEdge">
															  <option value="1">Línea</option>
															  <option value="2">Guión</option>
															</select>
														</div>
													</div>
												</div>
												
												<div class="field">
													<div class="section group">
														<div class="col span_1_of_2">
															<label>Grosor</label>
														</div>
														<div class="col span_1_of_2">
															<div class="section group">
																<div class="col span_2_of_4">
																	<input id="rangeLineWidthEdge" type="range" name="rangeLineWidthEdge" value="1" step="1" min="1" max="10" style="margin-top: 8px;">   
																</div>
																<div class="col span_2_of_4" style="text-align:right">
																	<output id="lineWidthEdge" name="lineWidthEdge" for="rangeLineWidthEdge"></output>
																	<output id="postfix-lineWidthEdge" class="postfix-mini">px</output>
																</div>
															</div>
														</div>
													</div>
												</div>
											</fieldset>
										</div>
									</section>

									<section id="edit-text" class="container-tab">
										<div class="content-tab">
											<fieldset>
												<div class="field">
													<div class="section group">
														<div class="col span_1_of_2">
															<label>	Nodo</label>
														</div>
														<div class="col span_1_of_2">
															<input id="nameNode" type="text" name="nameNode" onfocus="this.select();" autocomplete="off">
														</div>
													</div>
												</div>
												<div class="field">
													<div class="section group">
														<div class="col span_1_of_2">
															<label>Arista</label>
														</div>
														<div class="col span_1_of_2">
															<input id="nameEdge" type="text" name="nameEdge" autocomplete="off">
														</div>
													</div>
												</div>
												<div class="field">
													<div class="section group">
														<div class="col span_1_of_2">
															<label>Observaciones</label>
														</div>
														<textarea id="opcional" rows="11" width="100%" maxlength="255" name="opcional" style="height:180px;"></textarea>
													</div>
												</div>
											</fieldset>
										</div>
									</section>
								</div>
							</div>
						</section>
					</div>
				</div>
			</div>
			
			<div id="drawspace">
			</div>
		</section>
		
		<div id="captureDrawspace" class="popup popup_bot">
			<a id="captureDrawspaceDownload" download="árbol.png">
				<button class="btn-text accept">Capturar</button>
			</a>
		</div>

		<% if current_user %>
		<div id="documents" class="table animate_menu anime_menu_left">
			<div class="animate_menu-overlay"></div>
			<div class="animate_menu-content">
				<div id="bar-file">
					<div class="section-bar">
						<button type="button" class="btn-icon create middle-parent" title="Nuevo">
							<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" viewBox="0 0 32 32" xml:space="preserve">
								<g>
									<path d="M24,14.059V5.584L18.414,0H0v32h24v-0.059c4.499-0.5,7.998-4.309,8-8.941 C31.998,18.366,28.499,14.556,24,14.059z M17.998,2.413L21.586,6h-3.588C17.998,6,17.998,2.413,17.998,2.413z M2,30V1.998h14 v6.001h6v6.06c-4.501,0.498-8,4.308-8,8.941c0,2.829,1.308,5.352,3.35,7H2z M23,29.883c-3.801-0.009-6.876-3.084-6.885-6.883 c0.009-3.801,3.084-6.876,6.885-6.885c3.799,0.009,6.874,3.084,6.883,6.885C29.874,26.799,26.799,29.874,23,29.883z"/>
									<polygon points="24.002,22 24.002,18 22,18 22,22 18,22 18,24 22,24 22,28 24.002,28 24.002,24 28,24 28,22"/>
								</g>
							</svg>
						</button>

						<button type="button" class="btn-icon update middle-parent"  title="Renombrar" disabled>
							<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 333.817 333.817" xml:space="preserve">
								<g>
									<path d="M333.817,60.647L273.163,0L5.818,267.346L0,333.817l28.014-2.452l0.143,0.143l0.167-0.167
									l38.146-3.341L333.817,60.647z M37.418,252.625L234.14,55.904l6.856,6.856L44.274,259.481L37.418,252.625z M249.433,71.197
									l15.293,15.293L68.004,283.212l-15.293-15.293L249.433,71.197z M273.163,94.933l4.744,4.744L81.191,296.398l-4.744-4.744
									L273.163,94.933z M242.577,47.466l4.75-4.744L291.1,86.496l-4.744,4.744L242.577,47.466z M32.519,318.989l-17.692-17.692
									l2.506-28.587l11.647-11.647l43.773,43.773l-11.647,11.647L32.519,318.989z"/>
								</g>
							</svg>
						</button>

						<button type="button" class="btn-icon delete middle-parent trigger-dialog" data-dialog="document_delete" title="Eliminar" disabled>
							<svg class="middleXY-child" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" xml:space="preserve">
								<g>
									<path d="M12.5,1h-2c0-0.552-0.448-1-1-1h-3c-0.552,0-1,0.448-1,1h-2c-0.552,0-1,0.448-1,1h11
										C13.5,1.448,13.052,1,12.5,1z"/>
									<path d="M2.5,15c0,0.552,0.448,1,1,1h9c0.552,0,1-0.448,1-1V3h-11V15z M10.5,5.5C10.5,5.224,10.725,5,11,5
										s0.5,0.224,0.5,0.5v8c0,0.275-0.225,0.5-0.5,0.5s-0.5-0.225-0.5-0.5V5.5z M7.5,5.5C7.5,5.224,7.724,5,8,5
										c0.275,0,0.5,0.224,0.5,0.5v8C8.5,13.775,8.275,14,8,14c-0.276,0-0.5-0.225-0.5-0.5V5.5z M4.5,5.5C4.5,5.224,4.724,5,5,5
										s0.5,0.224,0.5,0.5v8C5.5,13.775,5.276,14,5,14s-0.5-0.225-0.5-0.5V5.5z"/>
								</g>
							</svg>
						</button>
					</div>
				</div>

				<section class="content-table">
					<ul class="header">
						<li>
							<div class="container-checkbox">
								<input name="check-all" type="checkbox">
							</div>
							<label>
								<span class="span_2_of_3" data-col="name"><a>Nombre</a></span>
								<span class="span_1_of_3 orderBy" data-col="updated_at"><a title="Última modificación">Modifi.</a></span>
							</label>
						</li>
					</ul>
					<ul class="body">
						<%= render 'document' %>
					</ul>
				</section>
			</div>
		</div>

		<div id="saveChange" class="dialog">
			<div class="dialog__overlay"></div>
			<div class="dialog__content">
				<article>
					<p>¿Desea guardar los cambios del documento actual antes de continuar?</p>
				</article>
				<div>
					<button class="btn-text cancel">No</button>
					<button class="btn-text accept">Sí</button>
				</div>
				<button class="close btn-icon" data-dialog-close>
					<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 612 612" xml:space="preserve">
						<g>
							<polygon points="612,36.004 576.521,0.603 306,270.608 35.478,0.603 0,36.004 270.522,306.011 0,575.997 35.478,611.397 306,341.411 576.521,611.397 612,575.997 341.459,306.011"/>
						</g>
					</svg>
				</button>
			</div>
		</div>

		<div id="saveAs" class="dialog">
			<div class="dialog__overlay"></div>
			<div class="dialog__content">
			   <form data-remote="true">
					<fieldset>
						<div class="field">
							<div class="section group">
								<div class="col span_1_of_2">
									<label class="required" for="document_name">Guardar como</label>
								</div>
								<div class="col span_1_of_2">
									<input id="document_name" type="text" name="document[name]" autocomplete="off" required>
								 	<div id="validateNameNewDoc" class="validateMsg"></div>
								</div>
							</div>
						</div>
					</fieldset>
					<button class="btn-text progress" type="submit">
						<div class="content" data-success="Guardado" data-error="Inválido">Guardar</div>
					</button>
					<button class="close btn-icon" data-dialog-close>
						<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 612 612" xml:space="preserve">
							<g>
								<polygon points="612,36.004 576.521,0.603 306,270.608 35.478,0.603 0,36.004 270.522,306.011 0,575.997 35.478,611.397 306,341.411 576.521,611.397 612,575.997 341.459,306.011"/>
							</g>
						</svg>
					</button>
				</form>
			</div>
		</div>

		<div id="document_delete" class="dialog">
			<div class="dialog__overlay"></div>
			<div class="dialog__content">
				<h2>Confirmación</h2>
				<article>
					<p>¿Está seguro que desea borrar los documentos seleccionados?</p>
				</article>
				<div>
					<button class="btn-text cancel">No</button>
					<button class="btn-text accept">Sí</button>
				</div>
				<button class="close btn-icon" data-dialog-close>
					<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 612 612" xml:space="preserve">
						<g>
							<polygon points="612,36.004 576.521,0.603 306,270.608 35.478,0.603 0,36.004 270.522,306.011 0,575.997 35.478,611.397 306,341.411 576.521,611.397 612,575.997 341.459,306.011"/>
						</g>
					</svg>
				</button>
			</div>
		</div>
		<% end %>
	</body>
</html>

<%= javascript_include_tag 'treeGraph/node', 'treeGraph/tree', 'treeGraph/updateDom', 'treeGraph/record', 'treeGraph/forest', 'treeGraph/main' %>

<script>
	(function() {
		/* 
		* tabs 
		*/
		tab.load('.tabs#mode', 1);
		tab.load('.tabs#mode-edit', 0); 

		/* 
		* btn-group
		*/
		var btns = document.getElementsByClassName('btn-group');
		for(var i = 0; i < btns.length; ++i){
			btns[i].onmouseover = function(){
				if(!this.getElementsByClassName('btn-icon')[0].disabled)
			      	classie.addClass(this, 'open');
		    };
		    btns[i].onmouseout = function(){
		      	classie.removeClass(this, 'open');
		    };
		}

	    /* 
	    * slide and push menus
	    */
	    <% if current_user %>
	    var eDocuments = document.querySelector('#documents.animate_menu');
	    document.querySelector('#open').onclick = function(){
	        classie.toggleClass(this, 'active');
	        classie.toggleClass(eDocuments, 'open');
	    };
	    document.querySelector('#documents.animate_menu .animate_menu-overlay').onclick = function(){
	    	classie.removeClass(eOpen, 'active');
	    	classie.removeClass(eDocuments, 'open');
	    };
		
		/*
		* dialog
		*/
		var dialogFxs = {};
		var triggers = document.querySelectorAll('.trigger-dialog');
		for(var i = 0; i < triggers.length; ++i){ 
			var id = triggers[i].getAttribute('data-dialog');
			var dialog = document.getElementById(id);
			dialogFxs[id] = new DialogFx(dialog);
			triggers[i].addEventListener('click', dialogFxs[id].toggle.bind(dialogFxs[id]));
		}



        /* 
        * CRUD 
        */
		/* create */
		$('.table#documents #bar-file .create').click(function(){
	   		var row = (addRow([
				{name: "name", attributes: {class: "span_2_of_3"}}, 
				{name: "updated_at", attributes: {class: "span_1_of_3", "data-type": "date"}}
			]));

			editableRow(row, 
				[{  name: "name", attributes: {type: "text", maxlength: 255, required: true}, validateMsg: "Debe contener de 1 a 255 caracteres"
		        }]
			);

			document.addEventListener('click', function _func(e){
				var fields = row.querySelectorAll("form span input, form span select");
				for(var i = 0; i < fields.length; ++i)
				    if(fields[i] === document.activeElement) return;

				if(row.querySelector('form').checkValidity()){
					var data = {};
					for(var i = 0; i < fields.length; ++i)
						data[fields[i].getAttribute('name')] = fields[i].value;

					$.post("/documents/create", data, function(data){ 
						if(data.errors !== undefined){
							removeEditableRow(row);
						}else{
							row.setAttribute("data-id", data.id);
							row.setAttribute("class", 'selected');
							//nonEditableRow(row, data);
							refreshTable();
						}
					});
				}else{
					removeEditableRow(row);
				}
				document.removeEventListener('click', _func);
			});
		});

		/* update */
		$(".table#documents #bar-file .update").click(function(event) { 
		    var row = document.querySelector(".table#documents .body li.selected");
		    if(row){
		    	editableRow(row, 
		    		[{	name: "name", 
			            attributes: {type: "text", maxlength: 255, required: true},
			            validateMsg: "Debe contener de 1 a 255 caracteres"
			        }]
				);
			
				document.addEventListener('click', function _func(e){
					var fields = row.querySelectorAll("form input, form select");
					for(var i = 0; i < fields.length; ++i)
					    if(fields[i] === document.activeElement) return;

					if(row.querySelector('form').checkValidity()){
						var data = {};
						for(var i = 0; i < fields.length; ++i)
							data[fields[i].getAttribute('name')] = fields[i].value;

						$.post("/documents/updateName", data, function(data){ 
							if(data.errors !== undefined)
								$.post("/documents/edit", {id: row.getAttribute("data-id")}, function(dataOriginal){ 
									nonEditableRow(row, dataOriginal);
								});
							else
								refreshTable();
						});
					}else{
						$.post("/documents/edit", {id: row.getAttribute("data-id")}, function(dataOriginal){ 
							nonEditableRow(row, dataOriginal);
						});
					}
					document.removeEventListener('click', _func);
				});
		    }
		});

        /* delete */
		$('#document_delete .accept').click(function(){
			var els = document.querySelectorAll('.table .body li.selected');
			if(els.length > 0){
				var ids = $(els).map(function(){ return $(this).attr("data-id"); }).get();
				$.ajax({
					url: "/documents/delete",
					data: {ids: ids},
					type: "POST", 
					success: function(){
						refreshTable();
					},
					error: function(){
						//report
					}
				});
			}
			dialogFxs['document_delete'].toggle();
		});
		$('#document_delete .cancel').click(function(){
			dialogFxs['document_delete'].toggle();
		});
		<% end %>



		/* 
		* order by
		*/
		$(".table ul.header span a").click(function(){
			var column = $(this).parents("span")[0];
			$(".table ul.header span.orderBy").removeClass("orderBy");
			$(column).addClass("orderBy");
			refreshTable();	
		});



	    /* cambia el 'title' de los 'button' cuando no es Mac */
	    if(!navigator.platform.match("Mac")){
	    	<% if current_user %>
	    	eOpen.title = "ctrl + f";
	    	eNewFile.title = "ctrl + d";
	        eSave.title = "ctrl + s";
	    	<% end %>
	        eUndo.title = "Deshacer (ctrl + z)";
	        eRedo.title = "Rehacer (ctrl + y)";
	        ePath.title = "Seleccionar ruta (ctrl + shift + a)";
	        document.getElementById("all").title = "Seleccionar todo (ctrl + a)";
	        eCut.title = "Cortar (ctrl + x)";
	        eCopy.title = "Copiar (ctrl + c)";
	        ePaste.title = "Deshacer (ctrl + v)";
	    }
	})();
</script>